/* pullout.js / Thomas Digby on behalf of MSL Group / 2015-03-02 */
function formatHtml(a){function b(a){for(var b=c(a),d="",i="",j=0;j<b.length;j++){var k=b[j],l=b[j-1];j>0&&(!e(l)||f(l)||h(l)||g(l)||(d+="	"),f(k)&&(d=d.slice(0,-1))),i+=d+k+"\n"}return i.trim()}function c(a){var b=d(a),c=b.replace(/\t/g,"").replace(/\n/g,"").replace(/\&gt;[\s]+\&lt;/g,"&gt;&lt;").replace(/(?!&gt;)(?!\n)&lt;/g,"\n&lt;").replace(/&gt;(?!&lt;)(?!\n)/g,"&gt;\n").split("\n");return c.filter(function(a){return""!==a})}function d(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(a).replace(/[&<>''\/]/g,function(a){return b[a]})}function e(a){return"&lt;"===a.substring(0,4)}function f(a){return"&#x2F;"===a.substring(4,10)}function g(a){for(var b=["br","input","link","meta","!doctype","basefont","base","area","source","hr","wbr","param","img","isindex","embed"],c=!1,d=0;d<b.length;d++){var e=new RegExp("&lt;\\b"+b[d]+"\\b");if(a.match(e)){c=!0;break}}return c}function h(a){return"&lt;!--"===a.substring(0,7)}return b(a)}function loadCSS(a,b,c,d){"use strict";function e(){for(var a,b=0;b<h.length;b++)h[b].href&&h[b].href.indexOf(f.href)>-1&&(a=!0);a?f.media=c||"all":setTimeout(e)}var f=window.document.createElement("link"),g=b||window.document.getElementsByTagName("script")[0],h=window.document.styleSheets;return f.rel="stylesheet",f.href=a,f.media="only x",d&&(f.onload=d),g.parentNode.insertBefore(f,g),e(),f}function loadJS(a,b){"use strict";var c=window.document.getElementsByTagName("script")[0],d=window.document.createElement("script");return d.src=a,d.async=!0,c.parentNode.insertBefore(d,c),b&&"function"==typeof b&&(d.onload=b),d}function pullout(a,b){var c={options:{clickToHighlight:!1,toggleCode:!1,highlightSyntax:!1,prismCss:"",prismJs:""},toggle:{insertHtml:"beforeend",idPrefix:"toggle-",hook:"data-pullout-toggle",selector:"pullout-toggle",contentOpen:"Show code",contentClose:"Hide code"},output:{insertHtml:"beforeend",idPrefix:"output-",hook:"data-pullout-output",selector:"pullout-output"}},d={},e=function(){n(),d=document.querySelectorAll(a),f(),c.options.highlightSyntax&&(document.body.classList.add("language-markup"),loadCSS(c.options.prismCss),loadJS(c.options.prismJs,o()))},f=function(){for(var a=0;a<d.length;a++){var b=d[a],e=formatHtml(b.innerHTML),f=h(a,e),l=c.options.toggleCode?i(a):"";g(b,f,l),c.options.toggleCode&&j(a),c.options.clickToHighlight&&k(a)}},g=function(a,b,d){var e=b.outerHTML,f=d.outerHTML;c.options.toggleCode&&(c.toggle.relativePlacement.length&&a.previousElementSibling?a.previousElementSibling.insertAdjacentHTML(c.toggle.insertHtml,f):a.insertAdjacentHTML(c.toggle.insertHtml,f)),a.insertAdjacentHTML(c.output.insertHtml,e)},h=function(a,b){var d=document.createElement("code"),e=["display: block;","overflow: auto;","padding: 15px 18px;","tab-size: 4;","white-space: pre;"].join(""),f=document.createAttribute(c.output.hook);return d.setAttributeNode(f),d.setAttribute("id",c.output.idPrefix+a),d.setAttribute("style",e),d.setAttribute("class",c.output.selector),c.options.toggleCode&&d.setAttribute("aria-visible",!1),d.innerHTML=b,d},i=function(a){var b=document.createElement("button"),d=document.createAttribute(c.toggle.hook);return b.setAttributeNode(d),b.setAttribute("id",c.toggle.idPrefix+a),b.setAttribute("class",c.toggle.selector),b.innerText=c.toggle.contentOpen,b},j=function(a){var b=document.getElementById(c.toggle.idPrefix+a);b.addEventListener("click",function(){l(a,b)},!1)},k=function(a){var b=document.getElementById(c.output.idPrefix+a);b.addEventListener("click",function(){m(b)},!1)},l=function(a,b){var d=document.getElementById(c.output.idPrefix+a);"false"===d.getAttribute("aria-visible")?(d.setAttribute("aria-visible",!0),b.innerHTML=c.toggle.contentClose):(d.setAttribute("aria-visible",!1),b.innerHTML=c.toggle.contentOpen)},m=function(a){var b=document.createRange(),c=window.getSelection();b.selectNodeContents(a),c.removeAllRanges(),c.addRange(b)},n=function(){for(var a in b)for(var d in b[a])c[a][d]=b[a][d]},o=function(){var a=setInterval(function(){window.Prism&&(Prism.highlightAll(),clearInterval(a))},50)};"querySelector"in document&&"localStorage"in window&&"addEventListener"in window&&e()}